### 钱包服务接口

###### 基础url:

###### 测试服：http://192.168.9.127:48080

###### 请求方法:POST

###### 请示数据格式:json

###### 公共请求数据：

| 字段 | 类型   | 说明                                             |
| ---- | ------ | ------------------------------------------------ |
| data | json   | 请求的具体数据                                   |
| sign | string | 具体数据的签名值，暂时先不用签名，需要的时候再加 |

公共响应数据：

| 字段     | 类型   | 说明                                             |
| -------- | ------ | ------------------------------------------------ |
| err_code | json   | 请求的具体数据                                   |
| err_msg  | string | 具体数据的签名值，暂时先不用签名，需要的时候再加 |
| data     | json   | 响应的具体数据                                   |

​	

1.获取资产接口：/asset/getbalance

###### 请求数据：

| 字段 | 类型   | 说明             |
| ---- | ------ | ---------------- |
| addr | string | 请求者的钱包地址 |

示例：

```json
{
	"data":{
		"addr":"bx0001"
	},
	"sign":"signedstring"
}
```



###### 响应数据：

| 字段          | 类型     | 说明        |
| ------------- | -------- | ----------- |
| main_coin     | *Asset   | 积分币信息  |
| ext_coin_list | []*Asset | brc代币列表 |

Asset结构

| 字段          | 类型   | 说明             |
| ------------- | ------ | ---------------- |
| symbol        | string | 币名称           |
| ext_coin_list | string | 余额，10的18次方 |

示例：

```json
{
    "err_code": 1,
    "err_msg": "成功",
    "data": {
        "main_coin": {
            "symbol": "Box",
            "balance": "100"
        },
        "ext_coin_list": [
            {
                "symbol": "Brc1",
                "balance": "100000"
            },
            {
                "symbol": "Brc5",
                "balance": "900000"
            }
        ]
    }
}
```



2.交易历史记录：/tx/gethistory

###### 请求数据：

| 字段      | 类型   | 说明                 |
| --------- | ------ | -------------------- |
| addr      | string | 请求者的钱包地址     |
| page      | int32  | 第几页，从1开始      |
| page_size | int32  | 页数据大小，默认10条 |

示例：

```json
{
	"data":{
		"addr":"bx0001",
		"page":1,
		"page_size":10
	},
	"sign":"signedstring"
}
```



###### 响应数据：

| 字段 | 类型           | 说明     |
| ---- | -------------- | -------- |
| txs  | []*Transaction | 交易列表 |

###### Transaction数据结构

| 字段         | 类型   | 说明                     |
| ------------ | ------ | ------------------------ |
| tx_type      | int8   | 交易类型，暂时为0        |
| addr_from    | string | 交易的发起者地址(出款人) |
| addr_to      | string | 交易的接收者地址(收款人) |
| amount       | string | 交易额                   |
| miner_fee    | string | 手续费                   |
| tx_hash      | string | 交易唯一标识             |
| block_height | ing64  | 交易块高                 |
| tx_time      | int64  | 交易时间                 |
| memo         | string | 备注信息                 |



示例：

```json
{
    "err_code": 1,
    "err_msg": "成功",
    "data": {
        "txs": [
            {
                "tx_type": 0,
                "addr_from": "bx0003",
                "addr_to": "bx0001",
                "amount": "800",
                "miner_fee": "10",
                "tx_hash": "hx0002",
                "block_height": 3,
                "tx_time": 15011111111000,
                "memo": "tome"
            },
            {
                "tx_type": 0,
                "addr_from": "bx0001",
                "addr_to": "bx0002",
                "amount": "1000",
                "miner_fee": "10",
                "tx_hash": "hx0001",
                "block_height": 1,
                "tx_time": 150000000000,
                "memo": "toyou"
            }
        ]
    }
}
```





3.发送交易：/tx/sendtx

###### 请求数据：

| 字段      | 类型   | 说明             |
| --------- | ------ | ---------------- |
| addr      | string | 请求者的钱包地址 |
| signed_tx | string | 签好名的交易数据 |

示例：

```json
{
	"data":{
		"addr":"bx0001",
		"signed_tx":"ae2323ffafbb88332daccc999d0f266e"
	},
	"sign":"signedstring"
}
```



###### 响应数据：由于交易发送是无法知道是否成功的，暂时只有成功。

| 字段 | 类型 | 说明 |
| ---- | ---- | ---- |
|      |      |      |

示例：

```bash
{
    "err_code": 1,
    "err_msg": "成功",
    "data": null
}
```

4.获取资产接口：/asset/getnonce

###### 请求数据：

| 字段 | 类型   | 说明             |
| ---- | ------ | ---------------- |
| addr | string | 请求者的钱包地址 |

示例：

```json
{
	"data":{
		"addr":"bx0001"
	},
	"sign":"signedstring"
}
```



###### 响应数据：

| 字段          | 类型     | 说明        |
| ------------- | -------- | ----------- |
| nonce     | uint64   | nonce值  |


示例：

```json
{
    "err_code": 10001,
    "err_msg": "成功",
    "data": {
        "nonce": 5
    }
}
```


5.检测圈子可否添加：/league/checkjoin

###### 请求数据：

| 字段 | 类型   | 说明             |
| ---- | ------ | ---------------- |
| addr | string | 请求者的钱包地址 |

示例：

```json
{
	"data":{
		"addr":"bx0001"
	},
	"sign":"signedstring"
}
```



###### 响应数据：

| 字段          | 类型     | 说明        |
| ------------- | -------- | ----------- |
| allow     | bool   | 为true表示允许添加  |


示例：

```json
{
    "err_code": 10001,
    "err_msg": "成功",
    "data": {
        "allow": true
    }
}
```

6.默认圈子获取：/league/getdefaultleague

###### 请求数据：

| 字段 | 类型   | 说明             |
| ---- | ------ | ---------------- |
| addr | string | 请求者的钱包地址 |

示例：

```json
{
	"data":{
		"addr":"bx0001"
	},
	"sign":"signedstring"
}
```



###### 响应数据：

| 字段          | 类型     | 说明        |
| ------------- | -------- | ----------- |
| chain_id     | string   | 圈子chainId  |
| name     | string   | 圈子名  |
| server_ip     | string   | 圈子ip或域名 |
| server_port     | string   | 圈子端口  |
| desc     | string   | 描述  |


示例：

```json
{
    "err_code": 10001,
    "err_msg": "成功",
    "data": {
        "chain_id": "chainid10001",
        "name": "默认圈",
        "server_ip": "33.66.88.99",
        "server_port": 4444,
        "desc": "这是一个默认的圈子"
    }
}
```


##### 错误码

| 错误码 | 描述           |
| ------ | -------------- |
| 10001  | 成功           |
| 10002  | json参数错误   |
| 10003  | 服务端查询错误 |
| 10004  | 公链错误       |

